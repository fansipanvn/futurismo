#+OPTIONS: toc:nil num:nil todo:nil pri:nil tags:nil ^:nil TeX:nil
#+CATEGORY: 技術メモ
#+TAGS:
#+DESCRIPTION:
#+TITLE: Milkodeを Windowsに導入

- [[http://milkode.ongaeshi.me/][Milkode - 行指向のソースコード検索エンジン]]

* Install
  事前に Windowsに Ruby と DevKitをいれておく.
  - http://rubyinstaller.org/downloads/
  - https://github.com/oneclick/rubyinstaller/wiki/Development-Kit

  gem で取得.

#+begin_src language
gem install milkode
#+end_src

eventmachineのインストールでコケた.

  - [[http://uisteven.blog.fc2.com/blog-entry-49.html][Windows 7 に Ruby 2.0 x64 を その5 ～EventMachine の問題と対策～｜Ruby と iPhone と UI と]]

以下のページを参考にして、git リポジトリから eventmachineを取得した.

#+begin_src language
gem install specific_install
gem specific_install -l 'git://github.com/u338steven/eventmachine.git'
#+end_src

再度, milkodeをインストールして完了. それにしても、依存関係が多すぎる...

* つかってみる
デフォルト設定をまずは設定.

#+begin_src language
$ milk init --default
#+end_src

検索対象のリポジトリを追加する.

#+begin_src language
$ milk add .
#+end_src

Web画面を起動. portはデフォルトでは 9292なので、変更した.

#+begin_src language
$ milk web -p 9293
#+end_src

* Emacsとの連携

#+begin_src emacs-lisp
(require 'milkode)
(global-set-key (kbd "M-g") 'milkode:search)
(global-set-key (kbd "M-s") 'milkode:search-at-point)
#+end_src

** Environment
   - Windows 8 64bit
   - Milkode 

** Special Thanks
   - [[http://tori932.dip.jp/Program/%E6%9C%80%E6%96%B0%E3%81%AEMilkode%281.8.0%29%E3%82%92Windows%E3%81%A7%E8%A9%A6%E3%81%99][最新のMilkode(1.8.0)をWindowsで試す | tori's home]]
