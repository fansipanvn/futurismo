#+OPTIONS: toc:nil
* Unix コマンド
** find

- [[http://www.xmisao.com/2013/09/01/how-to-use-find-and-xargs.html][find と xargs の基本的な使い方 -- ぺけみさお]]

*** -exec と xargs の違い
- exec は各行にたいして処理が実施される.
- args はすべての行にたいして処理が実施される.

#+begin_src sh
find . -name "*.txt" -exec wc -l {} \;
find . -name "*.txt" | xargs wc -l
#+end_src

-type f でファイルのみ. ディレクトリ無視.

** sed

- [[http://nunleeuw.hateblo.jp/entry/2013/03/09/202629][sed で個人的によく使うコマンド集 - emptyshelf]]

- sed の i オプションなしで置換を実行してみて, 問題がないか確認
- sed に i オプションをつけて実行

*** ヘッダの挿入

#+begin_src sh
sed -i '1s/^/test\n/' filename
sed -i '1i\test' filename
#+end_src

wiki にヘッダを挿入する

#+begin_src sh
find . -name "*.org" -exec sed -i '1i\#+OPTIONS: toc:nil' {} \;
#+end_src

* シェルスクリプト
** 引数チェック
*** 引数の数をチェック

#+begin_src sh
if [ $# != 1 ]; then
    echo "usage: $0 file_path" 1>&2
    exit 1
fi
#+end_src

*** ファイルやディレクトリパスが存在するか

#+begin_src sh
if [ -e パス ]; then
    # 存在する場合
else
    # 存在しない場合
fi
#+end_src

** ファイル・ディレクトリ操作

   - [[http://d.hatena.ne.jp/zariganitosh/20100921/get_file_name_ext_dir][ファイルパスからファイル名や拡張子を自由に取り出す - ザリガニが見ていた.... ]]

#+begin_src sh
$ fpath='/a/b/c.d.e'

# ファイル名を取り出す (拡張子あり)
$ fname_ext="${fpath##*/}"
$ echo $fname_ext
c.d.e

# ファイル名を取り出す (拡張子なし)
$ fname="${fname_ext%.*}"
$ echo $fname
c.d

# 拡張子を取り出す
$ fext="${fpath##*.}"
$ echo $fext
e

# ディレクトリを取り出す
$ fdir="${fpath%/*}"
$ echo $fdir
/a/b
#+end_src


** 日時操作
`date xxx `でかこんで実行する.

#+begin_src sh
DATE=`date -d "$1" '+%s'`
#+end_src

- [[http://shellscript.sunone.me/date.html][日付を取得する - UNIX & Linux コマンド・シェルスクリプト リファレンス]]

| フォーマット               | コマンド              |
|----------------------------+-----------------------|
| yyyy/mm/dd                 | date '+%Y/%m/%d'      |
| yyyy/mm/dd (Sun..Sat)      | date '+%Y/%m/%d (%a)' |
| yy/mm/dd                   | date '+%y/%m/%d'      |
| yyyy-mm-dd                 | date '+%F'            |
| mm/dd/yy                   | date '+%D'            |
| hh:mm (24 時間制)          | date '+%R'            |
| hh:mm:ss (24 時間制)       | date '+%T'            |
| hh:mm:ss AM PM (12 時間制) | date '+%r'            |

** for
*** コマンドラインから連番のフォルダ作成
    - [[http://shellscript.sunone.me/for.html][for 文の使用方法 - UNIX & Linux コマンド・シェルスクリプト リファレンス]]

    この程度はさらっと書きたいところだね.

    #+begin_src sh
    % for i in `seq 1 18`
    > do
    > mkdir $i
    > done 
    #+end_src

